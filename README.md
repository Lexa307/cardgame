# :video_game: Карточная онлайн игра «War of imperium»
## О проекте 
«War of imperium» представляет собой ККИ (Коллекционная карточная игра), основанную на пошаговой системе передаче ходов между оппонентами в течение матча с использованием предварительно подготовленных колод карт. 
**`Данный проект находится на ранней стадии разработки, в связи с этим, некоторые правила, механики и функцианальные возможности могут изменяться.`**
## Установка

Требуется:
 - Node.js 10.0.0 или выше;
 - MySQL Server 8.0.

Работа серверной части проекта предполагается в первую очередь на машинах с установленным дистрибутивом Linux, основанных на Ubuntu.

### Для установки на чистую систему

1) скачать файл [ubuntu_autoinstall.sh](https://raw.githubusercontent.com/Lexa307/cardgame/master/deploy/ubuntu_autoinstall.sh)
2)в дирректори где должна появиться папка с проектом разместить файл sh
3)используя терминал запустить файл ```bash ubuntu_autoinstall.sh``` и далее подтверждать установку и настройку необходимого ПО по умолчанию.

### Настройка БД

Проект не будет нормально функционировать без предустановленной базы данных, для ее создания перейдите в каталог DB и при помощи утилиты mysql запустите файл из этого каталога: ```SQL mysql -u(пользователь) -p(пароль) source > init.sql```

### Конфигурация сервера

Сервер использует переменные .env файла для конфигурации строки подключения к серверу mysql а также хранения ключа сессий и установки порта, который и будет использовать сервер.
.env файл следует создать в папке проекта ( там же где и находится app.js)
**Пример файла .env **
```
DB_HOST = 'localhost'
DB_NAME = 'carddb'
DB_PORT = 3306
DB_USER = 'root'
DB_PASSWORD = '1234'
DB_CONNECTION_LIMIT = 10000
SECRET_KEY = 'secret'
PORT = 3000

```
### Подгрузка зависимостей

Также для функционирования проекта требуются зависимости, которые можно скачать путем ввода в терминале из корня проекта ``` npm install```

### Запуск сервера

После того как бд установлена,зависимости подгружены и заполнен .env файл, в корне проекта при помощи терминала нужно ввести ```node app.js``` или ```npm start```.

Чтобы открыть страницу проекта достаточно в браузере перейти по адресу localhost:3000 
Система перенаправит вас на страницу авторизации.

## Геймплей

В «War of imperium» имеется стратегическая составляющая, проявляющаяся в тактике предматчевого сбора колод и рационального использования карт в течение матча, с элементом случайности, состоящем в порядке вытягивания карт из колоды и эффектах отдельных карт.

### Подготовка колоды

**`Каждый новый игрок получает базовый набор карт`** при регистрации в системе. В дальнейшем можно получить дополнительные наборы карт путём приобретения за игровую валюту (при этом приобретаются комплекты случайных карт выбранного игроком дополнения). 
Весь игровой процесс представлен матчами между двумя игроками. Перед началом матча игрок собирает колоду из 30 карт и приступает к поиску противника.

### Подбор начального рукава

После нахождения оппонента между игроками запускается процесс подбора начального рукава, где каждому игроку представляется 3 случайных карты из его собранной колоды, на выбор рукава у участников матча даётся 1 минута по истечении которой в случае если игрок не смог подобрать карты в качестве начальной колоды, возьмутся те карты, которые предлагались ему в момент окончания минуты.

### Начало матча

Когда оба игрока подобрали себе начальные рукава, случайным образом определяется право первого хода. Каждая карта в игре обладает стоимостью, измеряемой в затрачиваемых на её использование **`«золота»`**. 
Вначале игры у каждого игрока есть **`10 «золота»`**, за которое он может выставлять карты на поле боя. Карта или герой могут иметь особые способности, при наличии таковых в рукаве игрока у них в начале раунда имеется ** 1 единица маны**, которая нужна для использования способностей магического типа. Тот игрок, который ходит первым, является инициатором, это значит, что он может выложить карту на поле, или применить умение. Второй игрок в это время наблюдает за действиями другого. 

### Ход игры

Матчи между игроками сводятся к разыгрыванию карт с задачей первым свести очки HP (Hit Point) **`замка оппонента`** к нулю. У **`замка`** есть ограниченное количество **`HP – 100`**. В **`замке`** каждого игрока находится их **`уникальный герой`**, у которого есть способность, в зависимости от типа героя, **`умения`** могут быть **`магического`** или **`физического`** происхождения, которые **`при любом раскладе`** для использования требуют наличие определенного количества очков **`маны`**. При выбрасывании героя на поле боя, **`он не может использовать умения`**. 
У каждого игрока также имеются особые строения - **`шахты`**, каждый ход которые приносят игроку доход в виде определенного количества золота, на эти строения оппонент может воздействовать своими картами или героями путем применения к ним атак или способностей. Как и у замка, у каждой шахты также есть свой запас HP, при достижении этого показателя нуля, шахта разрушается, а у игрока, которого она была разрушена пропадает один из источников дохода - т.е. золота он будет получать меньше.
У каждой карты есть свои характеристики – здоровье, урон и цена за **`«золото»`**, для обычных карт, а также количество очков маны и цена за ману для использования способности, у которых есть умения. При выкладывании карты на поле, она сможет атаковать карту врага, замок врага или шахту оппонента только на следующем ходу. При завершении хода, инициатива передается другому игроку, а также каждому игроку дается **`2 «золота»`**, **`1 мана`** и **`1 случайная карта`** из колоды. Если в колоде заканчиваются карты, то все сыгранные карты (уничтоженные) перемешиваются, и создается новая колода (это не влияет на собранную игроком колоду ранее)

### Завершение матча

После уничтожения замка одного из игроков, участникам выводится результат матча, далее идет перенаправление в меню пользователя.
Каждый игрок в праве покинуть игру(закрыть вкладку, в которой идет матч), после чего, тот кто вышел будет объявлен проигравшим.

